@inject ILocalizationService LocalizationService
@model Getir.MerchantPortal.Models.PendingDocumentsViewModel

@{
	ViewData["Title"] = "İnceleme Bekleyen Belgeler";
}

<div class="d-flex justify-content-between align-items-center mb-4">
	<h3 class="mb-0">İnceleme Bekleyen Belgeler</h3>
	<a class="btn btn-secondary" href="@Url.Action("Index")">
		<i class="fas fa-arrow-left me-1"></i> @LocalizationService.GetString("Back")
	</a>
</div>

@if (!Model.Documents.Items.Any())
{
	<div class="alert alert-success">
		Şu anda bekleyen belge bulunmuyor.
	</div>
}
else
{
	<form asp-action="BulkVerify" method="post">
		@Html.AntiForgeryToken()

		<div class="table-responsive">
			<table class="table table-striped align-middle">
				<thead class="table-light">
					<tr>
						<th style="width: 40px;">
							<input type="checkbox" class="form-check-input" id="select-all" />
						</th>
						<th>Belge</th>
						<th>Yükleyen</th>
						<th>Yükleme Tarihi</th>
						<th>@LocalizationService.GetString("Actions")</th>
					</tr>
				</thead>
				<tbody>
				@foreach (var doc in Model.Documents.Items)
				{
					<tr>
						<td>
							<input type="checkbox" class="form-check-input document-checkbox" name="input.DocumentIds" value="@doc.Id" />
						</td>
						<td>
							<div class="fw-semibold">@doc.DocumentType</div>
							<div class="text-muted small">@doc.FileName</div>
						</td>
						<td>
							<div>@doc.UploadedByUserName</div>
						</td>
						<td>@doc.CreatedAt.ToString("yyyy-MM-dd HH:mm")</td>
						<td>
							<a class="btn btn-sm btn-outline-primary" href="@Url.Action("Details", new { id = doc.Id })">
								<i class="fas fa-eye"></i> Detay
							</a>
						</td>
					</tr>
				}
				</tbody>
			</table>
		</div>

		<div class="row gy-3 align-items-center mt-4">
			<div class="col-lg-3">
				<label class="form-label d-block">Karar</label>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="input.IsApproved" id="bulkApprove" value="true" checked="checked" />
					<label class="form-check-label" for="bulkApprove">Onayla</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="input.IsApproved" id="bulkReject" value="false" />
					<label class="form-check-label" for="bulkReject">Reddet</label>
				</div>
			</div>
			<div class="col-lg-6">
				<label class="form-label">Açıklama</label>
				<textarea name="input.VerificationNotes" class="form-control" rows="2" placeholder="Seçilen belgeler için not (zorunlu değil)"></textarea>
			</div>
			<div class="col-lg-3 text-lg-end">
				<button type="submit" class="btn btn-primary">
					<i class="fas fa-check me-1"></i> Toplu İşlemi Uygula
				</button>
			</div>
		</div>
	</form>

	@section Scripts {
		<script>
			document.getElementById('select-all')?.addEventListener('change', function (e) {
				var checkboxes = document.querySelectorAll('.document-checkbox');
				checkboxes.forEach(cb => cb.checked = e.target.checked);
			});
		</script>
	}
}

